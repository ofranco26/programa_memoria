package jogodamemoria_1;



import javax.swing.*;

import java.util.*;

import java.util.concurrent.TimeUnit;
public class JogoDaMemoria_1 {

   static Random random = new Random();

   static HashMap<String, Integer> rankingGlobal = new HashMap<>();
   public static void main(String[] args) {

       while (true) {

           String[] opcoesMenu = {"ğŸ® Iniciar Jogo", "ğŸ“– Tutorial", "âš–ï¸ Regras", "ğŸ† Ranking", "âŒ Sair"};

           String escolhaMenu = (String) JOptionPane.showInputDialog(null, "ğŸ‰ Seja bem-vindo ao **Jogo da MemÃ³ria**!\nEscolha uma opÃ§Ã£o:", "Menu Principal", JOptionPane.QUESTION_MESSAGE, null, opcoesMenu, opcoesMenu[0]);
           if (escolhaMenu == null || escolhaMenu.equals("âŒ Sair")) {

               JOptionPane.showMessageDialog(null, "ğŸ‘‹ Obrigado por jogar! AtÃ© a prÃ³xima!");

               break;

           }
           switch (escolhaMenu) {

               case "ğŸ“– Tutorial":

                   JOptionPane.showMessageDialog(null, "ğŸ“œ No **Jogo da MemÃ³ria**, vocÃª precisa memorizar nÃºmeros e responder perguntas para acumular pontos!");

                   break;

               case "âš–ï¸ Regras":

                   JOptionPane.showMessageDialog(null, "ğŸ“Œ **Regras do Jogo**:\nâœ… Cada jogador recebe um nÃºmero aleatÃ³rio para memorizar.\nâœ… Cada resposta correta vale **10 pontos**.\nâœ… Erros reduzem a pontuaÃ§Ã£o em **-5 pontos**.\nâœ… Perguntas surpresa podem dobrar ou roubar pontos!");

                   break;

               case "ğŸ† Ranking":

                   if (rankingGlobal.isEmpty()) {

                       JOptionPane.showMessageDialog(null, "ğŸ… **Ranking** estÃ¡ vazio! Jogue para preencher.");

                   } else {

                       StringBuilder ranking = new StringBuilder("ğŸ… **Ranking** ğŸ…\n");

                       for (Map.Entry<String, Integer> entry : rankingGlobal.entrySet()) {

                           ranking.append(entry.getKey()).append(" - Pontos: ").append(entry.getValue()).append("\n");

                       }

                       JOptionPane.showMessageDialog(null, ranking.toString());

                   }

                   break;

               case "ğŸ® Iniciar Jogo":

                   iniciarJogo();

                   break;

           }

       }

   }
   private static void iniciarJogo() {

       int numJogadores = obterNumeroJogadores();

       if (numJogadores <= 0) return;
       String[] nomes = obterNomesJogadores(numJogadores);

       int[] pontos = new int[numJogadores];

       int[] numerosMemorizados = new int[numJogadores];

       int tempoMemorizacao = definirDificuldade();
       for (int rodada = 1; rodada <= 5; rodada++) {

           jogarRodada(numJogadores, nomes, numerosMemorizados, pontos, tempoMemorizacao);

           exibirRanking(numJogadores, nomes, pontos);

           realizarPerguntaSurpresa(numJogadores, nomes, pontos);

       }
       determinarVencedor(numJogadores, nomes, pontos);

       exibirResultadoFinal(nomes, pontos);

   }
   private static int obterNumeroJogadores() {

       try {

           int numJogadores = Integer.parseInt(JOptionPane.showInputDialog("ğŸ‘¥ Quantos jogadores irÃ£o participar?"));

           if (numJogadores <= 0) {

               JOptionPane.showMessageDialog(null, "âš ï¸ O nÃºmero de jogadores deve ser maior que zero.");

               return 0;

           }

           return numJogadores;

       } catch (NumberFormatException e) {

           JOptionPane.showMessageDialog(null, "âš ï¸ Digite um nÃºmero vÃ¡lido!");

           return 0;

       }

   }
   private static String[] obterNomesJogadores(int numJogadores) {

       String[] nomes = new String[numJogadores];

       for (int i = 0; i < numJogadores; i++) {

           nomes[i] = JOptionPane.showInputDialog("ğŸ‘‹ Jogador " + (i + 1) + ", qual Ã© o seu nome?");

       }

       return nomes;

   }
   private static int definirDificuldade() {

       String[] niveis = {"ğŸ¯ FÃ¡cil", "ğŸ† MÃ©dio", "ğŸ”¥ DifÃ­cil"};

       String nivelEscolhido = (String) JOptionPane.showInputDialog(null, "Escolha o nÃ­vel de dificuldade:", "NÃ­vel de Dificuldade", JOptionPane.QUESTION_MESSAGE, null, niveis, niveis[0]);
       switch (nivelEscolhido) {

           case "ğŸ† MÃ©dio":

               return 3000;

           case "ğŸ”¥ DifÃ­cil":

               return 2000;

           default:

               return 5000;

       }

   }
   private static void jogarRodada(int numJogadores, String[] nomes, int[] numerosMemorizados, int[] pontos, int tempoMemorizacao) {

       for (int i = 0; i < numJogadores; i++) {

           int numeroMemorizado = random.nextInt(100) + 1;

           numerosMemorizados[i] = numeroMemorizado;
           JOptionPane.showMessageDialog(null, "ğŸ”¢ Jogador " + nomes[i] + ", memorize este nÃºmero:\n**" + numeroMemorizado + "**");

           try {

               TimeUnit.MILLISECONDS.sleep(tempoMemorizacao);

           } catch (InterruptedException e) {

               Thread.currentThread().interrupt();

           }
           String palpiteStr = JOptionPane.showInputDialog("ğŸ¤” Digite o nÃºmero que vocÃª memorizou:");

           verificarPalpite(numeroMemorizado, palpiteStr, pontos, i);

       }

   }
   private static void verificarPalpite(int numeroMemorizado, String palpiteStr, int[] pontos, int i) {

       try {

           int palpite = Integer.parseInt(palpiteStr);

           if (palpite == numeroMemorizado) {

               JOptionPane.showMessageDialog(null, "ğŸ‰ Correto! VocÃª ganhou **+10 pontos**!");

               pontos[i] += 10;

           } else {

               JOptionPane.showMessageDialog(null, "âŒ Errado! VocÃª perdeu **-5 pontos**.");

               pontos[i] -= 5;

           }

       } catch (NumberFormatException e) {

           JOptionPane.showMessageDialog(null, "âš ï¸ Digite um nÃºmero vÃ¡lido!");

       }

   }
   private static void exibirRanking(int numJogadores, String[] nomes, int[] pontos) {

       StringBuilder ranking = new StringBuilder("ğŸ† **Ranking Atual** ğŸ†\n");

       for (int i = 0; i < numJogadores; i++) {

           ranking.append((i + 1)).append(". ").append(nomes[i]).append(" - Pontos: ").append(pontos[i]).append("\n");

       }

       JOptionPane.showMessageDialog(null, ranking.toString());

   }
   private static void realizarPerguntaSurpresa(int numJogadores, String[] nomes, int[] pontos) {

       int indiceJogadorSurpresa = random.nextInt(numJogadores);

       JOptionPane.showMessageDialog(null, "ğŸ­ Pergunta surpresa! Jogador " + nomes[indiceJogadorSurpresa] + ", responda corretamente para ganhar **20 pontos** ou perder **10 pontos**!");
       // Lista de perguntas gerais com 9 perguntas no total

       String[] perguntasGerais = {

           "Qual Ã© a capital da FranÃ§a?", 

           "Quem escreveu 'Dom Quixote'?", 

           "Quantos planetas existem no Sistema Solar?",

           "Qual Ã© a capital da Alemanha?",

           "Qual Ã© o maior planeta do Sistema Solar?",

           "Quem pintou a Mona Lisa?",

           "Quantos estados tem o Brasil?",

           "Qual Ã© o nome do autor de 'Harry Potter'?",

           "Qual Ã© o sÃ­mbolo quÃ­mico da Ã¡gua?"

       };
       // Respostas correspondentes Ã s perguntas

       String[] respostasGerais = {

           "Paris", 

           "Miguel de Cervantes", 

           "8", 

           "Berlim", 

           "JÃºpiter", 

           "Leonardo da Vinci", 

           "26", 

           "J.K. Rowling", 

           "H2O"

       };
       int perguntaIndex = random.nextInt(perguntasGerais.length);

       String respostaStr = JOptionPane.showInputDialog("â“ " + perguntasGerais[perguntaIndex]);
       if (respostaStr != null && respostaStr.equalsIgnoreCase(respostasGerais[perguntaIndex])) {

           JOptionPane.showMessageDialog(null, "âœ… Correto! VocÃª ganhou **+20 pontos**!");

           pontos[indiceJogadorSurpresa] += 20;

       } else {

           JOptionPane.showMessageDialog(null, "âŒ Errado! VocÃª perdeu **-10 pontos**!");

           pontos[indiceJogadorSurpresa] -= 10;

       }

   }
   private static void determinarVencedor(int numJogadores, String[] nomes, int[] pontos) {

       int vencedor = 0;

       for (int i = 1; i < numJogadores; i++) {

           if (pontos[i] > pontos[vencedor]) {

               vencedor = i;

           }

       }

       JOptionPane.showMessageDialog(null, "ğŸ… O grande vencedor Ã© **" + nomes[vencedor] + "** com **" + pontos[vencedor] + "** pontos!");
       // Atualizar o ranking global, somando os pontos

       rankingGlobal.put(nomes[vencedor], rankingGlobal.getOrDefault(nomes[vencedor], 0) + pontos[vencedor]);

   }
   private static void exibirResultadoFinal(String[] nomes, int[] pontos) {

       StringBuilder rankingFinal = new StringBuilder("ğŸ† **Resultado Final da Partida** ğŸ†\n");

       for (int i = 0; i < nomes.length; i++) {

           rankingFinal.append((i + 1)).append(". ").append(nomes[i]).append(" - Pontos: ").append(pontos[i]).append("\n");

       }

       JOptionPane.showMessageDialog(null, rankingFinal.toString());
       // Exibir o Ranking Global

       JOptionPane.showMessageDialog(null, "ğŸ… **Ranking Atualizado** ğŸ…\n" + getRankingGlobal());

   }
   private static String getRankingGlobal() {

       StringBuilder ranking = new StringBuilder();

       // Ordena o ranking global pela pontuaÃ§Ã£o

       List<Map.Entry<String, Integer>> rankingList = new ArrayList<>(rankingGlobal.entrySet());

       rankingList.sort((entry1, entry2) -> Integer.compare(entry2.getValue(), entry1.getValue()));
       for (Map.Entry<String, Integer> entry : rankingList) {

           ranking.append(entry.getKey()).append(" - Pontos: ").append(entry.getValue()).append("\n");

       }

       return ranking.toString();

   }

}
 
